# YosysHQ/yosys#861
# Regular override integer
verific -sv top.v
verific -vhdl top.vhd
tee -o test1.out verific -import -chparam WIDTH 2 top_veri_v2k top_veri_95 top_vhdl
stat

# Regular override string
design -reset
verific -sv top.v
verific -vhdl top.vhd
tee -o test2.out verific -import -chparam greeting "hola hola" top_veri_v2k top_veri_95 top_vhdl

# Non-existent overrides
design -reset
verific -sv top.v
verific -vhdl top.vhd
tee -o test3.out verific -import -chparam nonexistent 12345678 top_veri_v2k top_veri_95 top_vhdl

# Duplicate overrides
design -reset
verific -sv top.v
verific -vhdl top.vhd
tee -o test4.out verific -import -chparam WIDTH 3 -chparam WIDTH 1 top_veri_v2k top_veri_95 top_vhdl

# All of the above
design -reset
verific -sv top.v
verific -vhdl top.vhd
tee -o test5.out verific -import -chparam WIDTH 9999 -chparam WIDTH 2 -chparam INIT 0 -chparam greeting "bonjour  " -chparam nonexistent 12345678 top_veri_v2k top_veri_95 top_vhdl

# All of the above (-all)
design -reset
verific -sv top.v
verific -vhdl top.vhd
tee -o test6.out verific -import -chparam WIDTH 9999 -chparam WIDTH 2 -chparam INIT 0 -chparam greeting "bonjour  " -chparam nonexistent 12345678 -all

# YosysHQ/yosys#871
# Check only top is elaborated and attempting to override (verific)
design -reset
verific -sv top2.v
tee -o test7.out verific -import -chparam ABCD 99 top

# Check only top is elaborated and attempting to override (hierarchy)
design -reset
verific -sv top2.v
tee -o test8.out hierarchy -chparam ABCD 99 -top top

# Prior test but with (hierarchy)
design -reset
verific -sv top.v
verific -vhdl top.vhd
tee -o test9.out hierarchy -chparam WIDTH 9999 -chparam WIDTH 2 -chparam INIT 0 -chparam greeting "bonjour  " -chparam nonexistent 12345678 -top top_veri_v2k

# Bind tests to check that bind instance exists
design -reset
verific -sv basic04.sv
verific -vhdl basic04.vhd
verific -import -all
hierarchy -top top
select -assert-count 1 top/properties_inst

design -reset
verific -sv basic04.sv
verific -vhdl basic04.vhd
verific -import top top_properties
hierarchy -top top
select -assert-count 1 top/properties_inst

design -reset
verific -sv basic04.sv
verific -vhdl basic04.vhd
verific -import top
hierarchy -top top
select -assert-count 1 top/properties_inst

design -reset
verific -sv basic04.sv
verific -vhdl basic04.vhd
hierarchy -top top
select -assert-count 1 top/properties_inst
